var c=null;function e(){this.d={}}e.prototype.B=function(a,d){this.d[a]||(this.d[a]=[]);this.d[a].push(d)};e.prototype.D=e.prototype.B;e.prototype.f=function(){var a=Array.prototype.slice.call(arguments),d=a.shift();if(this.d[d])for(var b=0;b<this.d[d].length;b++)this.d[d][b].apply(this,a)};
function f(a){f.e.constructor.call(this);this.options=f.n.m({l:{host:document.location.hostname,port:document.location.port||4E3}},a);this.Q={};this.S=f.A.s;this.R=[];this.F=new f.u(this);this.C=c;if(this.options.l.constructor==Object)this.p=new f.c(this.options.l.host,this.options.l.port),h(this.p),this.p.i(this);else debugger;var d=this;this.D(f.c.t,function(b){var a=d.F,b=JSON.parse(b);if(b.b==void 0||b.C==void 0||b.id==void 0)a.a.log("Beseda receive incorrect message",b),a.a.f("error",b);else if(b.b.indexOf("/meta/")==
0){var g=b.b.substr(6);!g in["connect","error","subscribe","unsubscribe"]&&(a.a.log("Unsupported meta channel "+b.b),a.a.f("error",b));a["_"+g].call(a,b)}else"successful"in b?(a.a.f("message:"+b.b+":"+b.id,b.error,b),b.V?a.a.log("Beseda publish to "+b.b,b):(a.a.log("Beseda publish request declined",b),a.a.f("error",b))):(a.a.log("Beseda get a new message from "+b.b,b),a.a.f("message:"+b.b,b.data,b),a.a.f("message",b.b,b.data,b))})}i();
f.prototype.log=function(){"console"in window&&"log"in console&&console.log.apply(console,arguments)};f.A={s:0,CONNECTING:1,G:2};f.M=0;function i(){function a(){}var d=f,b=e;a.prototype=b.prototype;d.prototype=new a;d.prototype.constructor=d;d.e=d.prototype.e=b.prototype;a=c}
f.n={W:function(){for(var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),d=[],b=0;b<22;b++)d[b]=a[0|Math.random()*64];return d.join("")},U:function(a){return this.m({},a)},m:function(a,d){for(var b in d)try{a[b]=d[b].constructor==Object?this.m(a[b],d[b]):d[b]}catch(j){a[b]=d[b]}return a},r:function(a,d){function b(){}b.prototype=d.prototype;a.prototype=new b;a.prototype.constructor=a;a.e=a.prototype.e=d.prototype;b=c}};f.u=function(a){this.a=a};
f.c=function(a,d){this.L=a;this.N=d;this.k=this.h=c};f.c.I="io_connect";f.c.t="io_message";f.c.J="io_disconnect";f.c.K="io_error";function h(a){var d=new f.g;a.h=d;a.k&&a.h.i(a.k)}f.c.prototype.i=function(a){this.h?this.h.i(a):this.k=a};f.j=function(){this.w=this.P=this.q=this.T=c;this.O=[]};f.j.H="|";f.j.prototype.i=function(a){this.w=a};f.g=function(){f.g.e.constructor.call(this);this.v="text";this.q="/long-polling";this.z=""};f.n.r(f.g,f.j);
f.o=function(){f.o.e.constructor.call(this);this.v="jsonp";this.q="/jsonp-polling";this.z="?callback=?"};f.n.r(f.o,f.g);