<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Beseda Monitor</title>
    <link href="/monitor.css" rel="stylesheet" type="text/css"/>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="http://ajax.microsoft.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="/socket.io/socket.io.js" type="text/javascript" charset="utf-8"></script>
	<script src="/monitor.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <h1>Beseda Monitor</h1>
    <ul id="servers"></ul>
    <script id="serverTemplate" type="text/x-jquery-tmpl">
            <li class="server-${server}">
                <a href="/stats/${server}"{{if isDown}} class="isDown"{{/if}}>${server}</a>
                <span class="lastUpdate">${Monitor.timeAgo(lastUpdate)}</span>
				<p>Channels: ${channelsCount}. Sessions: ${sessionsCount}</p>
                <h2>Stats</h2>
                <table class="stats">
                    <thead>
                        <tr>
                            <th></th>
                            <th>Accepted</th>
                            <th>Accepted at</th>
                            <th>Declined</th>
                            <th>Declined at</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Connections</td>
                            <td>${server.connectionCount}</td>
                            <td>${server.connectionTimestamp}</td>
                            <td>${server.declinedConnectionCount}</td>
                            <td>${server.declinedConnectionTimestamp}</td>
                        </tr>
                        <tr>
                            <td>Subscriptions</td>
                            <td>${server.subscriptionCount}</td>
                            <td>${server.subscriptionTimestamp}</td>
                            <td>${server.declinedSubscriptionCount}</td>
                            <td>${server.declinedSubscriptionTimestamp}</td>
                        </tr>
                        <tr>
                            <td>Publications</td>
                            <td>${server.publicationCount}</td>
                            <td>${server.publicationTimestamp}</td>
                            <td>${server.declinedPublicationCount}</td>
                            <td>${server.declinedPublicationTimestamp}</td>
                        </tr>
                    </tbody>
                </table>
            </li>
    </script>
</body>
</html>